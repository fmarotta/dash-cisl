{"version":3,"sources":["webpack:///./src/lib/components/DashCisl.react.js"],"names":["Math","mod","x","y","angularDist","a","b","min","PI","arcLength","from","to","uniqueId","num","prefix","String","Cisl","props","step","max","Error","breaks_n","id","cislRef","useRef","radius","angle2value","angle","value","round","value2angle","angle2tangent","offset","cos","sin","external2angle","bounds","current","getBoundingClientRect","center_x","left","width","center_y","top","height","atan","adjust_angle","format_label","n","toFixed","digits","CislFixedParts","Tick","cl","key","transform","Break","text","rails_n_border","rails_width","rails_border_width","ruler","angle_tick","coord_tick","push","coord_break","breaks_altitude","i","major_breaks_every","CislMovingParts","angleState","adjustedState","valueState","tangentState","handle_mousedown","e_down","persist","preventDefault","target","focus","some","classList","contains","pageX","touches","pageY","angle_down","angle_from_down","angle_to_down","cisl_slice_from","cisl_slice_to","mousemove_wrapper","e","handle_mousemove","mouseup_wrapper","handle_mouseup","forEach","event_type","window","addEventListener","once","e_move","undefined","new_angle","setProps","e_up","move_function","stopPropagation","stopImmediatePropagation","removeEventListener","handle_keydown","e_press","scale","which","weight","shiftKey","ctrlKey","handle_wheel","e_wheel","deltaY","Labels","coord_from","labels_altitude","coord_to","labels","overflow","postfix","angle_from_to","coord_from_to","values_sep","propTypes","PropTypes","string","number","func","arrayOf","defaultProps"],"mappings":"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","file":"ae0dceb-main-wps-hmr.js","sourcesContent":["import React, { useState, useRef, useEffect, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport './DashCisl.react.css';\n\n/**\n * Implement the modulo operation\n *\n * @return The modulo, not the usual remainder that javascript has.\n */\nMath.mod = function(x, y) {\n    if (x >= 0 && y >= 0 || x < 0 && y < 0)\n        return x % y\n    else\n        return (x % y) + y\n}\n\n/**\n * Compute the distance between two angles\n *\n * @return The distance along the shortest path along the circumference \n * (in any direction).\n */\nvar angularDist = function(a, b) {\n    return Math.min(Math.mod(b - a, 2 * Math.PI), Math.mod(a - b, 2 * Math.PI));\n}\n\n/**\n * Compute the length of an arc\n *\n * @return The length going in the direction from->to.\n */\nvar arcLength = function(from, to) {\n    return Math.mod(to - from, 2 * Math.PI);\n}\n\n/**\n * Generate a unique ID for an html element\n *\n * https://stackoverflow.com/questions/61282153/simplest-way-to-generate-unique-id-onto-a-value-grabbed-from-a-form-react\n */\nlet uniqueId = (function () {\n    let num = 0;\n    return function(prefix) {\n        prefix = String(prefix) || '';\n        num += 1;\n        return prefix + num;\n    }\n}());\n\n/**\n * Cisl\n *\n * A circular slider component. Features and customisation are somewhat limited\n * to what I need for my work. It has two handles which can be moved either\n * independently or at the same time (to shift the whole range). Handes can also\n * be moved with arrow keys, WASD keys, or the mouse wheel.\n */\nexport default function Cisl(props) {\n    // Validate step size\n    if (props.step && (props.max - props.min) / props.step < 3) {\n        throw Error(\"Not enough steps: at least three are required; \" +\n            \"either increase the range of the slider or decrease the step size.\");\n    } else if (props.step != null && (props.max - props.min) / props.step < props.breaks_n) {\n        throw Error(\"Step size too big or not enough breaks; \" +\n            \"you can decrease the range of the slider, increase `step', or decrease `breaks_n.\");\n    }\n\n    const {id = uniqueId(\"cisl-id-\")} = props;\n    const cislRef = useRef(null);\n    // the viewBox is 100x100 units, centered at 50,50\n    const radius = 175\n\n    // // Respond to resizes\n    // useLayoutEffect(() => {\n    //     const resizeObserver = new ResizeObserver((entries) => {\n    //         if (props.width[props.width.length - 1] === \"%\") {\n    //             const percentWidth = parseFloat(props.width) / 100;\n    //             const absoluteWidth = percentWidth * entries[0].borderBoxSize[0].inlineSize;\n    //             setWidth(absoluteWidth);\n    //         }\n    //     });\n    //     resizeObserver.observe(document.querySelector(`#${id}`).parentElement);\n    // }, []);\n\n    /* Computations\n     *\n     * The following functions are devoted to computing some quantities, \n     * mostly using trigonometry or modular arithmetic. They are here \n     * because they use the props.\n     */\n\n    /**\n     * Given an angle, return the closest admissible value, considering the  step\n     */\n    function angle2value(angle) {\n        angle = Math.mod(angle, 2 * Math.PI);\n        var value = props.min + angle * (props.max - props.min) / (2 * Math.PI);\n        if (!props.step)\n            return value;\n        return props.step * Math.round(value / props.step);\n    }\n    /**\n     * Given a value, return the corresponding angle\n     *\n     * When moving with the arrow keys, it may happen that one keypress \n     * moves the value to something bigger than the maximum value (even \n     * more than twice as big). Thus, its necessary to bring the value \n     * within the acceptable range first.\n     */\n    function value2angle(value) {\n        while (value < props.min)\n            value = props.max - (props.min - value);\n        if (value > props.max)\n            value %= props.max;\n        return 2 * Math.PI * (value - props.min) / (props.max - props.min);\n    }\n    /**\n     * Given the angle, get the coordinates on the rails\n     */\n    function angle2tangent(angle, offset = 0) {\n        var x = (radius + offset) * Math.cos(angle - Math.PI / 2);\n        var y = (radius + offset) * Math.sin(angle - Math.PI / 2);\n        return [x, y];\n    }\n    /**\n     * Given the coordinates of an external point, get the angle\n     *\n     * When the pointer is in a certain position, we want to know the \n     * angle at which it lies with respect to the center of the circle.\n     */\n    function external2angle(x, y) {\n        var bounds = cislRef.current.getBoundingClientRect()\n        var center_x = bounds.left + bounds.width / 2;\n        var center_y = bounds.top + bounds.height / 2;\n        var angle = Math.PI/2 + Math.atan((y - center_y) / (x - center_x));\n        if (x < center_x)\n            angle += Math.PI;\n        return angle;\n    }\n    /**\n     * Make sure that the angle is safe and sound\n     *\n     * First, when dragging the bar it may happen that angle < 0 or \n     * angle > 2pi because of the slice, so we correct this. Second, if \n     * we have a step, we make sure that the angle is allowed.\n     */\n    function adjust_angle(angle) {\n        if (!props.step)\n            return angle;\n        return value2angle(angle2value(angle));\n    }\n\n    /**\n     * Format the label\n     */\n    function format_label(n) {\n        return n.toFixed(props.digits);\n    }\n\n    /**\n     * CislFixedParts\n     *\n     * Renders the background of the circular slider. These parts should \n     * not move, except possibly when the viewport is resized.\n     */\n    function CislFixedParts() {\n        /* Subcomponents\n         *\n         * These functions create additional elements that are part of the \n         * circular slider. These elements have a defined structure, but can \n         * be parametrised.\n         */\n        function Tick(x, y, angle, cl, key) {\n            angle += Math.PI;\n            return (\n                <rect key={key} className={cl} x={x} y={y} style={{transform: 'translate(-50%,-100%) rotate('+angle+'rad)'}}/>\n            );\n        }\n        function Break(x, y, angle, cl, text, key) {\n            return (\n                <text key={key} className={cl} x={x} y={y} style={{transform: 'rotate('+angle+'rad)'}}>{text}</text>\n            );\n        }\n\n        /* draw the ruler */\n        if (props.breaks_n !== 0) {\n            var rails_n_border = props.rails_width + props.rails_border_width;\n            var ruler = [];\n            var angle_tick = adjust_angle(0);\n            var coord_tick = angle2tangent(angle_tick, -rails_n_border / 2);\n            ruler.push(\n                Tick(coord_tick[0], coord_tick[1], angle_tick, \"cisl-tick-major cisl--style\", 0)\n            );\n            var coord_break = angle2tangent(angle_tick, -props.breaks_altitude);\n            ruler.push(\n                Break(coord_break[0], coord_break[1], angle_tick, \"cisl-break-major cisl--style\", format_label(angle2value(angle_tick)), 1)\n            );\n        }\n        for (var i = 1; i < props.breaks_n; i++) {\n            angle_tick = adjust_angle(i * 2 * Math.PI / props.breaks_n);\n            coord_tick = angle2tangent(angle_tick, -rails_n_border / 2);\n            coord_break = angle2tangent(angle_tick, -props.breaks_altitude);\n            if (i % props.major_breaks_every == 0) {\n                ruler.push(\n                    Tick(coord_tick[0], coord_tick[1], angle_tick, \"cisl-tick-major cisl--style\", 2 * i)\n                );\n                ruler.push(\n                    Break(coord_break[0], coord_break[1], angle_tick, \"cisl-break-major cisl--style\", format_label(angle2value(angle_tick)), 2 * i + 1)\n                );\n            } else {\n                ruler.push(\n                    Tick(coord_tick[0], coord_tick[1], angle_tick, \"cisl-tick-minor cisl--style\", 2 * i)\n                );\n            }\n        }\n\n        return (\n          <>\n            <circle className='cisl-rails-border cisl--style' cx='0' cy='0' r={radius} fill='transparent' strokeWidth={props.rails_width + props.rails_border_width}></circle>\n            <circle className='cisl-rails cisl--style' cx='0' cy='0' r={radius} fill='transparent' strokeWidth={props.rails_width} ></circle>\n            {ruler}\n          </>\n        );\n    }\n\n    /**\n     * CislMovingParts\n     *\n     * All that can move. It's necessary to have a separate component from \n     * the rest because we don't want to re-render the parts that don't \n     * change every time we move the handles.\n     *\n     * It's defined here, under the main component, because we want to \n     * use the same props without the overhead of passing them to a \n     * nested component. It doesn't make sense to use the moving parts \n     * without everything else.\n     */\n    function CislMovingParts() {\n        //const [angleState, setAngleState] = useState([0, Math.PI / 4]);\n        const angleState = [value2angle(props.value[0]), value2angle(props.value[1])];\n        const adjustedState = [adjust_angle(angleState[0]), adjust_angle(angleState[1])];\n        const valueState = [angle2value(adjustedState[0]), angle2value(adjustedState[1])];\n        const tangentState = [angle2tangent(adjustedState[0]), angle2tangent(adjustedState[1])];\n        \n        /* event handlers */\n        var handle_mousedown = (e_down) => {\n            e_down.persist();\n            e_down.preventDefault();\n            e_down.target.focus();\n            /*\n            if (typeof this.onStart === \"function\") {\n                this.onStart()\n            }\n            */\n            if ([\"cisl-rails\", \"cisl-bar\", \"cisl-label-from-to\"].some((cl) => e_down.target.classList.contains(cl))) {\n                var pageX = e_down.pageX || e_down.touches[0].pageX;\n                var pageY = e_down.pageY || e_down.touches[0].pageY;\n                var angle_down = external2angle(pageX, pageY);\n                var angle_from_down = adjustedState[0];\n                var angle_to_down = adjustedState[1];\n                // bind these properties to the e_down event, so that we \n                // only have to pass the event to the handle_mousemove \n                // listener.\n                e_down.cisl_slice_from = arcLength(angle_from_down, angle_down);\n                e_down.cisl_slice_to = arcLength(angle_down, angle_to_down);\n            }\n            var mousemove_wrapper = (e) => handle_mousemove(e, e_down);\n            var mouseup_wrapper = (e) => handle_mouseup(e, mousemove_wrapper);\n            [\"mouseup\", \"touchend\"].forEach((event_type) => window.addEventListener(event_type, mouseup_wrapper, {once: true}));\n            [\"mousemove\", \"touchmove\"].forEach((event_type) => window.addEventListener(event_type, mousemove_wrapper));\n        }\n        function handle_mousemove(e_move, e_down) {\n            if (e_move.pageX == 0 && e_move.touches === undefined) {\n                var pageX = 0;\n                var pageY = e_move.pageY || e_move.touches[0].pageY;\n            } else {\n                var pageX = e_move.pageX || e_move.touches[0].pageX;\n                var pageY = e_move.pageY || e_move.touches[0].pageY;\n            }\n            var new_angle = external2angle(pageX, pageY);\n            if ([\"cisl-handle-to\", \"cisl-label-to\"].some((cl) => e_down.target.classList.contains(cl))) {\n                // setAngleState([adjustedState[0], new_angle]);\n                props.setProps({value: [valueState[0], angle2value(new_angle)]});\n            } else if ([\"cisl-handle-from\", \"cisl-label-from\"].some((cl) => e_down.target.classList.contains(cl))) {\n                // setAngleState([new_angle, adjustedState[1]]);\n                props.setProps({value: [angle2value(new_angle), valueState[1]]});\n            } else if ([\"cisl-rails\", \"cisl-bar\", \"cisl-label-from-to\"].some((cl) => e_down.target.classList.contains(cl))) {\n                // setAngleState([new_angle - e_down.cisl_slice_from, new_angle + e_down.cisl_slice_to]);\n                props.setProps({value: [angle2value(new_angle - e_down.cisl_slice_from), angle2value(new_angle + e_down.cisl_slice_to)]});\n            }\n        }\n        function handle_mouseup(e_up, move_function) {\n            e_up.stopPropagation();\n            e_up.stopImmediatePropagation();\n            [\"mousemove\", \"touchmove\"].forEach((event_type) => window.removeEventListener(event_type, move_function));\n            /*\n            if (typeof this.onFinish === \"function\") {\n                this.onFinish()\n            }\n            */\n        }\n        function handle_keydown(e_press) {\n            var scale = false; // whether to move (false) or to expand/contract (true)\n            switch (e_press.which) {\n                // up\n                case 38:  // up arrow\n                case 87: // W\n                    scale = true;\n                // left\n                case 37:  // left arrow\n                case 65:  // A\n                    var weight = -1;\n                    break;\n                // down\n                case 40:  // down arrow\n                case 83: // S\n                    scale = true;\n                // right\n                case 39:  // right arrow\n                case 68: // D\n                    var weight = 1;\n                    break;\n                default:\n                    return;\n            }\n            if (e_press.shiftKey) {\n                weight *= 10;\n            }\n            // TODO: FIXME\n            if (props.step !== null && e_press.ctrlKey) {\n                weight = arcLength(value2angle(props.min), value2angle(props.min + weight * props.step)); // advance 1 or 10 steps\n            } else {\n                weight *= Math.PI / 50; // advance 1 or 10 percent\n            }\n            /*\n            if (typeof this.onStart === \"function\") {\n                this.onStart()\n            }\n            */\n            if (scale) {\n                // setAngleState([adjustedState[0] + weight / 2, adjustedState[1] - weight / 2]);\n                props.setProps({value: [angle2value(adjustedState[0] + weight / 2), angle2value(adjustedState[1] - weight / 2)]});\n            } else if ([\"cisl-handle-to\", \"cisl-label-to\"].some((cl) => e_press.target.classList.contains(cl))) {\n                // setAngleState([adjustedState[0], adjustedState[1] + weight]);\n                props.setProps({value: [angle2value(adjustedState[0]), angle2value(adjust_angle(adjustedState[1] + weight))]});\n            } else if ([\"cisl-handle-from\", \"cisl-label-from\"].some((cl) => e_press.target.classList.contains(cl))) {\n                // setAngleState([adjustedState[0] + weight, adjustedState[1]]);\n                props.setProps({value: [angle2value(adjustedState[0] + weight), angle2value(adjustedState[1])]});\n            } else if ([\"cisl-bar\", \"cisl-label-from-to\"].some((cl) => e_press.target.classList.contains(cl))) {\n                // setAngleState([adjustedState[0] + weight, adjustedState[1] + weight]);\n                props.setProps({value: [angle2value(adjustedState[0] + weight), angle2value(adjustedState[1] + weight)]});\n            }\n            /*\n            if (typeof this.onFinish === \"function\") {\n                this.onFinish()\n            }\n            */\n        }\n        function handle_wheel(e_wheel) {\n            var weight = 0.01 * e_wheel.deltaY;\n            /*\n            if (typeof this.onStart === \"function\") {\n                this.onStart()\n            }\n            */\n            // setAngleState([adjustedState[0] - weight * Math.PI / 50, adjustedState[1] + weight * Math.PI / 50]); // zoom in/out 1 percent\n            props.setProps({value: [angle2value(adjustedState[0] - weight * Math.PI / 50), angle2value(adjustedState[1] + weight * Math.PI / 50)]}); // zoom in/out 1 percent\n            /*\n            if (typeof this.onFinish === \"function\") {\n                this.onFinish()\n            }\n            */\n        }\n\n        /**\n         * Components to render the labels.\n         */\n        function Labels() {\n            if (angularDist(adjustedState[0], adjustedState[1]) > Math.PI / 10) {\n                var coord_from = angle2tangent(adjustedState[0], props.labels_altitude);\n                var coord_to = angle2tangent(adjustedState[1], props.labels_altitude);\n                var labels = <>\n                    <foreignObject\n                        x={coord_from[0]}\n                        y={coord_from[1]}\n                        style={{width: '1', height: '1', overflow: 'visible'}}\n                    >\n                        <span\n                            className='cisl-label cisl-label-from cisl--style'\n                            tabIndex='0'\n                            style={{transform: 'translate(-50%,-100%) rotate('+adjustedState[0]+'rad)'}}\n                            onMouseDown={handle_mousedown}\n                            onTouchStart={handle_mousedown}\n                            onKeyDown={handle_keydown}\n                            onWheel={handle_wheel}>\n                            {props.prefix + format_label(valueState[0]) + props.postfix}\n                        </span>\n                    </foreignObject>\n                    <foreignObject\n                        x={coord_to[0]}\n                        y={coord_to[1]}\n                        style={{width: '1', height: '1', overflow: 'visible'}}\n                    >\n                        <span\n                            className='cisl-label cisl-label-to cisl--style'\n                            tabIndex='0'\n                            style={{transform: 'translate(-50%,-100%) rotate('+adjustedState[1]+'rad)'}}\n                            onMouseDown={handle_mousedown}\n                            onTouchStart={handle_mousedown}\n                            onKeyDown={handle_keydown}\n                            onWheel={handle_wheel}>\n                            {props.prefix + format_label(valueState[1]) + props.postfix}\n                        </span>\n                    </foreignObject>\n                  </>;\n            } else {\n                var angle_from_to = adjustedState[0] + arcLength(adjustedState[0], adjustedState[1]) / 2;\n                var coord_from_to = angle2tangent(angle_from_to, props.labels_altitude);\n                var labels = \n                    <foreignObject\n                        x={coord_from_to[0]}\n                        y={coord_from_to[1]}\n                        style={{width: '1', height: '1', overflow: 'visible'}}\n                    >\n                        <span\n                            className='cisl-label cisl-label-from-to cisl--style'\n                            tabIndex='0'\n                            style={{transform: 'translate(-50%,-100%) rotate('+angle_from_to+'rad)'}}\n                            onMouseDown={handle_mousedown}\n                            onTouchStart={handle_mousedown}\n                            onKeyDown={handle_keydown}\n                            onWheel={handle_wheel}>\n                            {props.prefix + format_label(valueState[0]) + props.values_sep + format_label(valueState[1]) + props.postfix}\n                        </span>\n                    </foreignObject>;\n            }\n\n            return(labels);\n        }\n\n        return(\n          <>\n            <Labels />\n            <path className='cisl-bar cisl--style' fill='transparent' tabIndex='0' strokeWidth={props.rails_width} d={'M ' + tangentState[0][0] + ' ' + tangentState[0][1] + ' ' +\n              'A ' + radius + ' ' + radius + ' ' +\n              '0 ' + (arcLength(adjustedState[0], adjustedState[1]) <= Math.PI ? '0 ' : '1 ') + '1 ' +\n              tangentState[1][0] + ' ' + tangentState[1][1] + ' ' +\n              'A ' + radius + ' ' + radius + ' ' +\n              '0 ' + (arcLength(adjustedState[1], adjustedState[0]) <= Math.PI ? '0 ' : '1 ') + '1 ' +\n              tangentState[0][0] + \" \" + tangentState[0][1]} strokeDasharray={arcLength(adjustedState[0], adjustedState[1]) * radius + \" \" + 2 * Math.PI * radius}\n              onMouseDown={handle_mousedown} onTouchStart={handle_mousedown} onKeyDown={handle_keydown} onWheel={handle_wheel}\n            />\n            <rect className='cisl-handle cisl-handle-from cisl--style' tabIndex='0' x={tangentState[0][0]} y={tangentState[0][1]} style={{width: props.rails_width + 2 * props.rails_border_width, height: props.rails_width + 2 * props.rails_border_width, transform: 'translate(-50%,-50%) rotate('+adjustedState[0]+'rad)'}} onMouseDown={handle_mousedown} onTouchStart={handle_mousedown} onKeyDown={handle_keydown} onWheel={handle_wheel} />\n            <rect className='cisl-handle cisl-handle-to cisl--style' tabIndex='0' x={tangentState[1][0]} y={tangentState[1][1]} style={{width: props.rails_width + 2 * props.rails_border_width, height: props.rails_width + 2 * props.rails_border_width, transform: 'translate(-50%,-50%) rotate('+adjustedState[1]+'rad)'}} onMouseDown={handle_mousedown} onTouchStart={handle_mousedown} onKeyDown={handle_keydown} onWheel={handle_wheel} />\n          </>\n        );\n    }\n\n    return(\n      <svg id={id} ref={cislRef} viewBox='-250 -250 500 500' className='cisl-container'>\n        <CislFixedParts />\n        <CislMovingParts />\n      </svg>\n    );\n}\n\n/*\n * Send the new value to the parent component.\n * setProps is a prop that is automatically supplied\n * by dash's front-end (\"dash-renderer\").\n * In a Dash app, this will update the component's\n * props and send the data back to the Python Dash\n * app server if a callback uses the modified prop as\n * Input or State.\n */\n\nCisl.propTypes = {\n    /**\n     * The id of the circular slider.\n     */\n    id: PropTypes.string,\n    /**\n     * Minimum value taken by the slider.\n     */\n    min: PropTypes.number,\n    /**\n     * Maximum value taken by the slider.\n     */\n    max: PropTypes.number,\n    /**\n     * The initial value of the 'from' handle.\n     */\n    step: PropTypes.number,\n    /**\n     * The total number of breaks in the 'ruler'.\n     */\n    breaks_n: PropTypes.number,\n    /**\n     * Put a major break every ... breaks.\n     */\n    major_breaks_every: PropTypes.number,\n    /**\n     * The width of the rails.\n     */\n    rails_width: PropTypes.number,\n    /**\n     * The thickness of the border of the rails.\n     */\n    rails_border_width: PropTypes.number,\n    /**\n     * The height of the breaks.\n     */\n    breaks_altitude: PropTypes.number,\n    /**\n     * The height of the labels.\n     */\n    labels_altitude: PropTypes.number,\n    /**\n     * The number of digits in the labels.\n     */\n    digits: PropTypes.number,\n    /**\n     * The prefix for the labels.\n     */\n    prefix: PropTypes.string,\n    /**\n     * The postfix for the labels.\n     */\n    postfix: PropTypes.string,\n    /**\n     * The separator for the labels.\n     */\n    values_sep: PropTypes.string,\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func,\n    /**\n     * Internal state, used by Dash.\n     */\n    value: PropTypes.arrayOf(PropTypes.number)\n};\n\nCisl.defaultProps = {\n    min: 0,\n    max: 100,\n    value: [0, 25],\n    step: 0, // DOC: if 0, we've got a continuous slider\n    breaks_n: 50,\n    major_breaks_every: 5, // put a major break (and a label) every x minor breaks\n    rails_width: 10,\n    rails_border_width: 2,\n    breaks_altitude: 30,\n    labels_altitude: 12,\n    digits: 2, // how many digits should labels and breaks have\n    prefix: '',\n    postfix: '',\n    values_sep: ':'\n};\n"],"sourceRoot":""}